{
  "comments": [
    {
      "key": {
        "uuid": "3fc1c92e_f89ff043",
        "filename": "swig/swig_interfaces/oc_api.i",
        "patchSetId": 8
      },
      "lineNbr": 242,
      "author": {
        "id": 21
      },
      "writtenOn": "2019-11-22T01:11:48Z",
      "side": 1,
      "message": "You should probably do these things.",
      "range": {
        "startLine": 241,
        "startChar": 0,
        "endLine": 242,
        "endChar": 52
      },
      "revId": "d13fd282aaac5a4d1c6e8efda756764db23dbf8f",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "196ce200_19bec187",
        "filename": "swig/swig_interfaces/oc_api.i",
        "patchSetId": 8
      },
      "lineNbr": 242,
      "author": {
        "id": 4407
      },
      "writtenOn": "2019-11-22T17:07:55Z",
      "side": 1,
      "message": "Quick question regarding the jni_callback_list on shutdown.\n\nIs there ever a case that a user may call main_init do some stuff that register callbacks then call main_shutdown.  Later they call main_init are there any callback registered the first time main_init was called that we would expect to get a callback on from the C layer?",
      "parentUuid": "3fc1c92e_f89ff043",
      "range": {
        "startLine": 241,
        "startChar": 0,
        "endLine": 242,
        "endChar": 52
      },
      "revId": "d13fd282aaac5a4d1c6e8efda756764db23dbf8f",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a27a194f_09603088",
        "filename": "swig/swig_interfaces/oc_api.i",
        "patchSetId": 8
      },
      "lineNbr": 242,
      "author": {
        "id": 21
      },
      "writtenOn": "2019-11-22T17:30:20Z",
      "side": 1,
      "message": "Firstly, frequent shutdown/init of the stack can most definitely be expected depending on how the Android app is written, and prompted by the user switching out \nof the app an switching back in later.\n\nFollowing the shutdown/init, responses to any previously open requests would be\nrejected by the C layer and not propagate up, so no issues there. The shutdown sequences in C try to clear everything. Sample app runs through valgrind verify \nthat there are no \"reachable blocks\" when the app exits.\n\nBut with an uncleared jni callbacks list, there\u0027s a possibility of holding onto\ndangling references through the list when the app is pulled back up later.\nI\u0027m not sure how the Android runtime handles memory when apps go into standby - I\u0027m sure it knows of all allocations that had occurred through the app. So, it would\nbe good to add a \"jni_list_clear()\" to oc_iotivity_lite_jni.c and invoke that right\nafter joining the jni_poll_event_thread which follows the event loop signalling on\na shutdown.",
      "parentUuid": "196ce200_19bec187",
      "range": {
        "startLine": 241,
        "startChar": 0,
        "endLine": 242,
        "endChar": 52
      },
      "revId": "d13fd282aaac5a4d1c6e8efda756764db23dbf8f",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b3180355_d6b8918e",
        "filename": "swig/swig_interfaces/oc_connectivity.i",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 21
      },
      "writtenOn": "2019-11-22T00:53:08Z",
      "side": 1,
      "message": "We probably need \"jni_xxx\" versions of these functions to add mutex locking around the oc_connectivity_xxx() calls.",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 29,
        "endChar": 43
      },
      "revId": "d13fd282aaac5a4d1c6e8efda756764db23dbf8f",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "28921a4c_4097a268",
        "filename": "swig/swig_interfaces/oc_connectivity.i",
        "patchSetId": 8
      },
      "lineNbr": 29,
      "author": {
        "id": 4407
      },
      "writtenOn": "2019-11-22T17:07:55Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "b3180355_d6b8918e",
      "range": {
        "startLine": 28,
        "startChar": 0,
        "endLine": 29,
        "endChar": 43
      },
      "revId": "d13fd282aaac5a4d1c6e8efda756764db23dbf8f",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    }
  ]
}