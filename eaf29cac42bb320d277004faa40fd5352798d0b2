{
  "comments": [
    {
      "key": {
        "uuid": "9a3d3df0_ff1cdf6c",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 695,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "To be more correct, please rename to:\n\ncoap_tcp_compute_message_length().",
      "range": {
        "startLine": 695,
        "startChar": 0,
        "endLine": 695,
        "endChar": 25
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_9f22f3ff",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 695,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_ff1cdf6c",
      "range": {
        "startLine": 695,
        "startChar": 0,
        "endLine": 695,
        "endChar": 25
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_9f0f932e",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 706,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Change to:\n    total_length +\u003d coap_pkt-\u003epayload_len;",
      "range": {
        "startLine": 706,
        "startChar": 0,
        "endLine": 706,
        "endChar": 68
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_df1c7bc4",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 706,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "According to \"Figure 4: CoAP Frame for Reliable Transports\" at https://www.rfc-editor.org/rfc/rfc8323.txt,\n\nLength(len) means the length of options/payload instead of th e whole size of CoAP Frame\ntherefore option_length should be the real length of option\n\nSince I am not good at TCP Spec, I wonder whether MAKER_LEN is needed or not. So, I leave it to be added.",
      "parentUuid": "9a3d3df0_9f0f932e",
      "range": {
        "startLine": 706,
        "startChar": 0,
        "endLine": 706,
        "endChar": 68
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_df191b7b",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 720,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following line to line 720:\n\n    total_length +\u003d *num_extended_length_bytes;",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_3f7927fd",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 720,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "According to \"Figure 4: CoAP Frame for Reliable Transports\" at https://www.rfc-editor.org/rfc/rfc8323.txt,\n\nlength is not supposed to include  num_extended_length_bytes",
      "parentUuid": "9a3d3df0_df191b7b",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_3f2647bb",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 730,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following line to line 730:\n\n    total_length +\u003d *num_extended_length_bytes;",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_1f7ee3e4",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 730,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "According to \"Figure 4: CoAP Frame for Reliable Transports\" at https://www.rfc-editor.org/rfc/rfc8323.txt,\n\nlength is not supposed to include  num_extended_length_bytes",
      "parentUuid": "9a3d3df0_3f2647bb",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_1f2b8383",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 738,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following line to line 738:\n\n    total_length +\u003d *num_extended_length_bytes;",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_7f83afcc",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 738,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "According to \"Figure 4: CoAP Frame for Reliable Transports\" at https://www.rfc-editor.org/rfc/rfc8323.txt,\n\nlength is not supposed to include  num_extended_length_bytes",
      "parentUuid": "9a3d3df0_1f2b8383",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_bf409736",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 746,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Rename to coap_tcp_parse_message_length().",
      "range": {
        "startLine": 746,
        "startChar": 0,
        "endLine": 746,
        "endChar": 27
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_5faa2bd5",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 746,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_bf409736",
      "range": {
        "startLine": 746,
        "startChar": 0,
        "endLine": 746,
        "endChar": 27
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_9f3dd3be",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 824,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Rename to coap_udp_set_header_fields().",
      "range": {
        "startLine": 824,
        "startChar": 0,
        "endLine": 824,
        "endChar": 22
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_7fa56f03",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 824,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_9f3dd3be",
      "range": {
        "startLine": 824,
        "startChar": 0,
        "endLine": 824,
        "endChar": 22
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_9f3673e6",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 852,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Rename to header_length_calculation.",
      "range": {
        "startLine": 852,
        "startChar": 28,
        "endLine": 852,
        "endChar": 52
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_5f886be7",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 852,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_9f3673e6",
      "range": {
        "startLine": 852,
        "startChar": 28,
        "endLine": 852,
        "endChar": 52
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_7f20cf9b",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 860,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following to line 860:\n\n  if (coap_pkt-\u003epayload \u0026\u0026 coap_pkt-\u003epayload_len \u003e 0) {\n\n    header_length_calculation +\u003d  COAP_PAYLOAD_MARKER_LEN;\n\n  }\n\n  header_length_calculation +\u003d coap_pkt-\u003etoken_len;\n\nThis ensures that header_length_calculation includes the length of all options that are common between UDP and TCP.",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_bf6c1738",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 860,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_7f20cf9b",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_5f250baa",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 863,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following to line 863:\n\n    header_length_calculation +\u003d COAP_TCP_DEFAULT_HEADER_LEN;\n\nFor TCP, this adds the length of the TCP (length + code) fields.",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_9f695328",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 863,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "at line 869 , there is 2 meaning COAP_TCP_DEFAULT_HEADER_LEN",
      "parentUuid": "9a3d3df0_5f250baa",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_bf39b7da",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 870,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following to line 870:\n\n    header_length_calculation +\u003d num_extended_length_bytes;\n\nThis adds the size of the \"extended length\" field to the length of the rest of header, thus providing a complete size of the TCP header that precedes the payload.",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_ff333ff4",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 873,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "This should simply be:\n\nif (header_length_calculation \u003c COAP_MAX_HEADER_SIZE) {",
      "range": {
        "startLine": 872,
        "startChar": 0,
        "endLine": 873,
        "endChar": 31
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_ff769f05",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 873,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_ff333ff4",
      "range": {
        "startLine": 872,
        "startChar": 0,
        "endLine": 873,
        "endChar": 31
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_df30fbea",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 884,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Add the following to line 884:\n\n  header_length_calculation +\u003d COAP_HEADER_LEN;",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_3f4da773",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 884,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Move this line to just before line 897.",
      "range": {
        "startLine": 884,
        "startChar": 4,
        "endLine": 884,
        "endChar": 73
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_df73db13",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 884,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_df30fbea",
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_3f600735",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 884,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Would you please let me know the reason why it is supposed to be moved?",
      "parentUuid": "9a3d3df0_3f4da773",
      "range": {
        "startLine": 884,
        "startChar": 4,
        "endLine": 884,
        "endChar": 73
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_1f526313",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 890,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "This should simply be:\n\nif (header_length_calculation \u003c COAP_MAX_HEADER_SIZE) {",
      "range": {
        "startLine": 889,
        "startChar": 0,
        "endLine": 890,
        "endChar": 31
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_1f654345",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 890,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "9a3d3df0_1f526313",
      "range": {
        "startLine": 889,
        "startChar": 0,
        "endLine": 890,
        "endChar": 31
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_7f572f03",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 920,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "Please take this logic out. We don\u0027t need it.",
      "range": {
        "startLine": 916,
        "startChar": 0,
        "endLine": 920,
        "endChar": 3
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_7f5a8f84",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 920,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "comparing them is meaningful Just in case there is a mistake in assuming the length of option",
      "parentUuid": "9a3d3df0_7f572f03",
      "range": {
        "startLine": 916,
        "startChar": 0,
        "endLine": 920,
        "endChar": 3
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_5f5ceb25",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 1018,
      "author": {
        "id": 21
      },
      "writtenOn": "2018-10-01T21:24:42Z",
      "side": 1,
      "message": "We don\u0027t need this function.\n\nIt seems like this function was partly responsible of making the incorrect length calculation right.\n\nThe TCP adapter can directly call coap_tcp_parse_message_length() to determine how many more bytes to read.",
      "range": {
        "startLine": 1002,
        "startChar": 0,
        "endLine": 1018,
        "endChar": 1
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9a3d3df0_5f5fcb72",
        "filename": "messaging/coap/coap.c",
        "patchSetId": 5
      },
      "lineNbr": 1018,
      "author": {
        "id": 475
      },
      "writtenOn": "2018-10-04T06:20:00Z",
      "side": 1,
      "message": "According to \"Figure 4: CoAP Frame for Reliable Transports\" at https://www.rfc-editor.org/rfc/rfc8323.txt, \n\ncoap_tcp_parse_message_length just returns the length of option and the length of payload.\nso it is still needed",
      "parentUuid": "9a3d3df0_5f5ceb25",
      "range": {
        "startLine": 1002,
        "startChar": 0,
        "endLine": 1018,
        "endChar": 1
      },
      "revId": "eaf29cac42bb320d277004faa40fd5352798d0b2",
      "serverId": "c6509b8a-a471-4ec1-8e5f-9aed2654acb5",
      "unresolved": false
    }
  ]
}